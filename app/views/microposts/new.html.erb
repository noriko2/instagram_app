<% provide(:title, "新規投稿") %>
<h1>新規投稿</h1>

<div class="row">
   <aside class="col-md-4">
     <section class="user_info">
　　　  <%= link_to image_tag("user_img.jpeg", alt: "user_img", width: "50px"), current_user %>
       <h1><%= current_user.user_name %></h1>
     </section>
     <section class="micropost_form">
       <%= form_with(model: @micropost, local: true) do |f| %>
         <!--エラーがある場合は、表示する-->
         <%= render 'shared/error_messages', object: f.object %>
         <div class="field">
           <%= f.text_area :content, placeholder: "Compose new micropost..." %>
         </div>
         <%= f.submit "投稿する", class: "btn btn-primary" %>
         <span class="image">
           <%= f.file_field :image, accept: "image/jpeg, image/gif, image/png" %>
         </span>
       <% end %>

       <!--#リスト 13.67: jQueryでファイルサイズをチェック-->
       <script type="text/javascript">
         $("#micropost_image").bind("change", function() {
           var size_in_megabytes = this.files[0].size/1024/1024;
           if (size_in_megabytes > 5) {
             alert("Maximum file size is 5MB. Please choose a smaller file.");
             $("#micropost_image").val("");
           }
         });
       </script>

     </section>
   </aside>
</div>
